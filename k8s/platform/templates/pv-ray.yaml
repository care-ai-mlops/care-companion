{{- $node := .Values.blockStorage.node        | default "kvm-node-01" -}}
{{- $size := .Values.blockStorage.raySize | default "50Gi" -}}

apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv-ray
spec:
  storageClassName: local-block
  capacity:       { storage: {{ $size }} }
  accessModes:    [ReadWriteOnce]             
  persistentVolumeReclaimPolicy: Retain
  local:
    path: /mnt/block/ray                 
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values: [ {{ $node | quote }} ]
